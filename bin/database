#!/bin/bash
. $(pwd)/bin/define
. $(pwd)/bin/helpers

create_database() {
    echo -e "[CREATE DATABASE]"
    verify_mysql_status $mysql_deamon

    echo -e "create database..."
    if [[ $1 == "" ]]; then
        sql_dir=$(pwd)
    else
        sql_dir=$1
    fi

    docker cp $sql_dir/createuser.sql $mysql_daemon:/home
    docker cp $sql_dir/db.sql $mysql_daemon:/home
    docker cp $(pwd)/bin/runsql $mysql_daemon:/home

    passwd=" -p"$mysql_password
    docker exec $mysql_daemon /home/runsql $passwd
    echo -e "done."
}

create_database $(pwd)/sql
